<!DOCTYPE HTML>
<html>

<head>

  <link rel="stylesheet" href="style.css">

  <script>
    'use strict';
    document.addEventListener('DOMContentLoaded', function () {
      document.querySelector('#guessHigher').addEventListener('click', checkHigher);
      document.querySelector('#guessEqual').addEventListener('click', checkEqual);
      document.querySelector('#guessLower').addEventListener('click', checkLower);
      document.querySelector('#getCoins').addEventListener('click', getCoins);
      let cSpan = document.getElementById('cSpan');
      let wSpan = document.getElementById('wSpan');
      let dSpan = document.getElementById('dSpan');
      let debtSpan = document.getElementById('debtSpan')
      let bet = document.getElementById('betField');
      let randomNumberMin = 1;
      let randomNumberMax = 10;
      let randomNumber = rand(randomNumberMin, randomNumberMax);
      let d = 6;
      let w = rand(1, d);
      let a = rand(1, d);
      let guess = 1;
      let coins = 10;
      let bonusAdd = 0;
      let bonusMul = 1;
      let debt = 0;


      console.log('You rolled a  : ' + w);
      console.log('Anti rolled a : ' + a)

      dSpan.innerText = d;
      cSpan.innerText = coins;
      wSpan.innerText = w;
      debtSpan.innerText = debt;

      function rand(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

      function validInput() {
        console.log('You have ' + coins + ' coins');
        console.log('You bet ' + bet.value + ' coins');
        if (bet.value <= 0) {
          alert("Set a positive number, you must!");
          return false;
        }
        if (bet.value > coins) {
          alert("Not enough coins, you have!");
          return false;
        }
        return true;
      }

      function checkHigher() {
        console.log('Higher pressed');
        if (!validInput()) return;
        let value = parseInt(bet.value, 10);
        coins = coins - value;
        let change = (w - a + bonusAdd) * bonusMul;
        coins = coins + value + change;
        console.log('Your coins changed by ' + change);
        updateText();
      }

      function checkEqual() {
        console.log('Equal pressed');
        if (!validInput()) return;
        let value = parseInt(bet.value);
        let change = 0;
        if (w == a) {
          change = (value * 2 + bonusAdd) * bonusMul;
        } else {
          change = -value;
        }
        coins = coins + change;
        console.log('Your coins changed by ' + change);
        updateText();
      }

      function checkLower() {
        console.log('Lower pressed');
        if (!validInput()) return;
        let value = parseInt(bet.value, 10);
        coins = coins - value;
        let change = (a - w + bonusAdd) * bonusMul;
        coins = coins + value + change;
        console.log('Your coins changed by ' + change);
        updateText();
      }

      function updateText() {
        console.log('You have ' + coins + ' coins');
        let getCoinsDiv = document.getElementById('getCoinsDiv');
        getCoinsDiv.style.display = coins == 0 ? "block" : "none";
        bet.max = coins;
        bet.value = coins;
        w = rand(1, 6);
        a = rand(1, 6);
        wSpan.innerText = w;
        cSpan.innerText = Math.round(coins).toLocaleString();
        debtSPan.innerText = debt;
        console.log('You rolled a  : ' + w);
        console.log('Anti rolled a : ' + a);
      }

      function getCoins() {
        coins = 10;
        debt = debt - 10;
        updateText();
      }
    });
  </script>

</head>

<body>

  <div class="container">

    <div class="game">
      You rolled a <span id="wSpan"></span> on a D<span id="dSpan"></span>.
      <br>
      I also rolled... do you think that you rolled higher, equal, or lower?
      <br>
      <form>
        <label for="betField">You have <span id="cSpan"></span> coins to bet:</label>
        <input type="number" min="1" max="100" id="betField" placeholder="0">
        <br>
        Is your roll
        <button type="button" id="guessHigher">Higher</button>
        <button type="button" id="guessEqual">Equal</button>
        <button type="button" id="guessLower">Lower</button>
        ?
      </form>
    </div>

    <div class="bank">
      Bank: <span id="bankAccount"></span>
      <hr>
      WIP
    </div>



    <div class="shop">
      Shop
      <hr>
      <div class="upgrade">
        Upgrades: WIP
      </div>
      
    </div>

    <div id="getCoinsDiv" style="display: none;">
      <button type="button" id="getCoins">Run out of coins, you have!</button>
    </div>

  </div>

</body>

</html>
